<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Agent Debate System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .setup-panel {
            padding: 30px;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .input-group input,
        .input-group textarea,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .input-group input:focus,
        .input-group textarea:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .api-info {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .api-info strong {
            color: #856404;
        }

        .agents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .agent-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e9ecef;
        }

        .agent-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .agent-card textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            min-height: 100px;
            font-size: 0.95em;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        button {
            padding: 12px 30px;
            font-size: 1em;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .debate-area {
            padding: 30px;
            display: none;
        }

        .debate-area.active {
            display: block;
        }

        .debate-status {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
        }

        .debate-status strong {
            color: #2196F3;
        }

        .stage-container {
            position: relative;
            min-height: 600px;
            background: linear-gradient(to bottom, #e8f4f8 0%, #f0f0f0 100%);
            border-radius: 20px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
        }

        .agent-character {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.3s ease;
        }

        .agent-character.speaking {
            transform: scale(1.1);
            z-index: 10;
        }

        .agent-character.speaking .agent-avatar {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .agent-1-char {
            top: 50px;
            left: 50px;
        }

        .agent-2-char {
            top: 50px;
            right: 50px;
        }

        .agent-3-char {
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
        }

        .agent-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 3em;
            color: white;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            border: 5px solid white;
            margin-bottom: 10px;
        }

        .agent-1-char .agent-avatar { background: #667eea; }
        .agent-2-char .agent-avatar { background: #f093fb; }
        .agent-3-char .agent-avatar { background: #4facfe; }

        .agent-label {
            background: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            white-space: nowrap;
        }

        .speech-bubble {
            position: absolute;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            max-width: 400px;
            max-height: 300px;
            overflow-y: auto;
            line-height: 1.6;
            font-size: 0.95em;
            color: #333;
            opacity: 0;
            transform: scale(0.8);
            animation: bubbleIn 0.5s ease-out forwards;
        }

        .speech-bubble::-webkit-scrollbar {
            width: 6px;
        }

        .speech-bubble::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .speech-bubble::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        @keyframes bubbleIn {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .speech-bubble.fade-out {
            animation: bubbleOut 0.3s ease-out forwards;
        }

        @keyframes bubbleOut {
            to {
                opacity: 0;
                transform: scale(0.8);
            }
        }

        .bubble-1 {
            top: 180px;
            left: 180px;
            border-bottom-left-radius: 5px;
        }

        .bubble-2 {
            top: 180px;
            right: 180px;
            border-bottom-right-radius: 5px;
        }

        .bubble-3 {
            bottom: 180px;
            left: 50%;
            transform: translateX(-50%) scale(0.8);
            border-bottom-left-radius: 5px;
            animation: bubbleIn3 0.5s ease-out forwards;
        }

        @keyframes bubbleIn3 {
            to {
                opacity: 1;
                transform: translateX(-50%) scale(1);
            }
        }

        .bubble-3.fade-out {
            animation: bubbleOut3 0.3s ease-out forwards;
        }

        @keyframes bubbleOut3 {
            to {
                opacity: 0;
                transform: translateX(-50%) scale(0.8);
            }
        }

        .bubble-header {
            font-weight: 600;
            color: #667eea;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .messages-container {
            display: none;
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #667eea;
            font-weight: 600;
        }

        .loading::after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        .summary-section {
            background: #f0f8ff;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .summary-section h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .summary-content {
            line-height: 1.8;
            color: #333;
        }

        .error-message {
            background: #fff3f3;
            border: 2px solid #f44336;
            padding: 15px;
            border-radius: 8px;
            color: #c62828;
            margin-bottom: 20px;
        }

        .scrollbar-custom::-webkit-scrollbar {
            width: 10px;
        }

        .scrollbar-custom::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .scrollbar-custom::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        .scrollbar-custom::-webkit-scrollbar-thumb:hover {
            background: #5568d3;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé≠ Multi-Agent Debate System</h1>
            <p>Watch AI agents engage in structured debates with unique perspectives</p>
        </div>

        <div class="setup-panel" id="setupPanel">
            <div class="api-info">
                <strong>‚ö†Ô∏è API Key Required:</strong> This demo uses OpenAI's API. You'll need an API key from <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI</a>. The key is stored only in your browser session.
            </div>

            <div class="input-group">
                <label>OpenAI API Key</label>
                <input type="password" id="apiKey" placeholder="sk-..." />
            </div>

            <div class="input-group">
                <label>Debate Topic</label>
                <textarea id="debateTopic" placeholder="Should UCLA require CS majors to take linguistics?">Should UCLA require CS majors to take linguistics?</textarea>
            </div>

            <div class="input-group">
                <label>Number of Rounds</label>
                <select id="numRounds">
                    <option value="2">2 rounds</option>
                    <option value="3" selected>3 rounds</option>
                    <option value="4">4 rounds</option>
                    <option value="5">5 rounds</option>
                </select>
            </div>

            <div class="input-group">
                <label>AI Model</label>
                <select id="modelSelect">
                    <option value="gpt-4o-mini">GPT-4o-mini (faster, cheaper)</option>
                    <option value="gpt-4o">GPT-4o (most capable)</option>
                    <option value="gpt-3.5-turbo">GPT-3.5 Turbo (budget)</option>
                </select>
            </div>

            <h2 style="margin-top: 30px; margin-bottom: 15px; color: #333;">Configure Agent Personas</h2>
            <div class="agents-grid">
                <div class="agent-card">
                    <h3>Agent 1: The Pragmatist</h3>
                    <textarea id="agent1Persona" placeholder="Define Agent 1's perspective...">You are a pragmatic computer science professor who values practical skills and industry readiness. You believe CS education should focus on technical skills that directly apply to software engineering careers. You're skeptical of requirements that don't clearly enhance employability.</textarea>
                </div>

                <div class="agent-card">
                    <h3>Agent 2: The Interdisciplinarian</h3>
                    <textarea id="agent2Persona" placeholder="Define Agent 2's perspective...">You are an interdisciplinary scholar who believes in the intersection of computer science and linguistics. You argue that understanding language, semantics, and communication theory enhances AI/NLP work, user interface design, and makes better-rounded technologists.</textarea>
                </div>

                <div class="agent-card">
                    <h3>Agent 3: The Student Advocate</h3>
                    <textarea id="agent3Persona" placeholder="Define Agent 3's perspective...">You are a current UCLA CS student who represents student perspectives. You're concerned about degree requirements, workload, costs, and graduation timelines. You want requirements to be justified and beneficial, not just add to the burden without clear value.</textarea>
                </div>
            </div>

            <div class="controls">
                <button class="btn-primary" id="startDebateBtn">Start Debate</button>
            </div>
        </div>

        <div class="debate-area" id="debateArea">
            <div class="debate-status" id="debateStatus">
                <strong>Status:</strong> <span id="statusText">Initializing...</span>
            </div>

            <div id="errorContainer"></div>

            <div class="stage-container" id="stageContainer">
                <div class="agent-character agent-1-char" id="agent1Char">
                    <div class="agent-avatar">ü§ì</div>
                    <div class="agent-label">The Pragmatist</div>
                </div>
                <div class="agent-character agent-2-char" id="agent2Char">
                    <div class="agent-avatar">üéì</div>
                    <div class="agent-label">The Interdisciplinarian</div>
                </div>
                <div class="agent-character agent-3-char" id="agent3Char">
                    <div class="agent-avatar">üéí</div>
                    <div class="agent-label">The Student Advocate</div>
                </div>
            </div>

            <div class="messages-container scrollbar-custom" id="messagesContainer">
                <!-- Hidden transcript -->
            </div>

            <div class="controls">
                <button class="btn-secondary" id="endDebateBtn" style="display: none;">End Debate Now</button>
                <button class="btn-secondary" id="newDebateBtn">New Debate</button>
            </div>

            <div class="summary-section" id="summarySection" style="display: none;">
                <h3>üìä Debate Summary</h3>
                <div class="summary-content" id="summaryContent"></div>
            </div>
        </div>
    </div>

    <script>
        class DebateAgent {
            constructor(name, persona, color) {
                this.name = name;
                this.persona = persona;
                this.color = color;
                this.conversationHistory = [];
            }

            addToHistory(role, content) {
                this.conversationHistory.push({ role, content });
            }

            getSystemPrompt(topic, turnNumber) {
                return `${this.persona}

You are participating in an ongoing debate about: "${topic}"

This is turn ${turnNumber} of the conversation.

DEBATE RULES:
1. Stay in character according to your perspective
2. Keep your response VERY BRIEF (1-2 sentences maximum)
3. Make ONE clear point per turn
4. Respond directly to what was just said
5. Be conversational and natural
6. If you're starting to agree with others, acknowledge it
7. Signal if you think consensus is being reached

${turnNumber <= 3 ? 'State your position briefly in 1-2 sentences.' : 'Respond to the previous speaker in 1-2 sentences.'}`;
            }
        }

        class DebateSystem {
            constructor() {
                this.agents = [];
                this.currentTurn = 0;
                this.maxTurns = 15;
                this.topic = '';
                this.apiKey = '';
                this.model = 'gpt-4o-mini';
                this.debateHistory = [];
                this.isRunning = false;
                this.currentAgentIndex = 0;
            }

            initialize(topic, numRounds, apiKey, model, agentPersonas) {
                this.topic = topic;
                this.maxTurns = numRounds * 3; // Convert rounds to turns (3 agents)
                this.apiKey = apiKey;
                this.model = model;
                this.currentTurn = 0;
                this.currentAgentIndex = 0;
                this.debateHistory = [];
                this.isRunning = false;

                // Create agents with personas
                const agentConfigs = [
                    { name: 'The Pragmatist', color: '#667eea', persona: agentPersonas[0] },
                    { name: 'The Interdisciplinarian', color: '#f093fb', persona: agentPersonas[1] },
                    { name: 'The Student Advocate', color: '#4facfe', persona: agentPersonas[2] }
                ];

                this.agents = agentConfigs.map(config => 
                    new DebateAgent(config.name, config.persona, config.color)
                );
            }

            async callOpenAI(agent, turnNumber) {
                const messages = [
                    {
                        role: 'system',
                        content: agent.getSystemPrompt(this.topic, turnNumber)
                    }
                ];

                // Add context from recent debate
                if (this.debateHistory.length > 0) {
                    const recentDebate = this.debateHistory
                        .slice(-6) // Last 6 turns
                        .map(entry => `${entry.agent}: ${entry.message}`)
                        .join('\n\n');
                    
                    messages.push({
                        role: 'user',
                        content: `Recent conversation:\n\n${recentDebate}\n\nProvide your brief response (1-2 sentences only).`
                    });
                } else {
                    messages.push({
                        role: 'user',
                        content: `State your initial position on: "${this.topic}" (1-2 sentences only)`
                    });
                }

                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${this.apiKey}`
                    },
                    body: JSON.stringify({
                        model: this.model,
                        messages: messages,
                        temperature: 0.8,
                        max_tokens: 100
                    })
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error?.message || 'API request failed');
                }

                const data = await response.json();
                const message = data.choices[0].message.content;

                // Add to agent's history
                agent.addToHistory('assistant', message);

                return message;
            }

            async takeTurn() {
                if (this.currentTurn >= this.maxTurns) {
                    this.endDebate();
                    return false;
                }

                const agent = this.agents[this.currentAgentIndex];
                this.currentTurn++;
                
                try {
                    updateStatus(`Turn ${this.currentTurn} - ${agent.name} is thinking...`);
                    showLoading();

                    const message = await this.callOpenAI(agent, this.currentTurn);
                    
                    this.debateHistory.push({
                        agent: agent.name,
                        message: message,
                        turn: this.currentTurn,
                        agentIndex: this.currentAgentIndex
                    });

                    hideLoading();
                    displayMessage(agent.name, message, this.currentTurn, this.currentAgentIndex + 1);

                    // Wait 5 seconds so user can read the message before moving to next turn
                    await this.sleep(5000);

                    // Check for consensus keywords (only after 12 turns and must have strong consensus language)
                    const strongConsensusKeywords = ['we agree', 'reached consensus', 'we can agree', 'found common ground'];
                    const hasStrongConsensus = strongConsensusKeywords.some(keyword => 
                        message.toLowerCase().includes(keyword)
                    );

                    if (hasStrongConsensus && this.currentTurn >= 12) {
                        await this.sleep(2000);
                        this.endDebate();
                        return false;
                    }

                    // Move to next agent
                    this.currentAgentIndex = (this.currentAgentIndex + 1) % this.agents.length;
                    
                    // Automatically continue to next turn
                    if (this.isRunning) {
                        return await this.takeTurn();
                    }
                    
                    return true;
                } catch (error) {
                    console.error('Debate error:', error);
                    hideLoading();
                    showError(`Error with ${agent.name}: ${error.message}`);
                    this.isRunning = false;
                    return false;
                }
            }

            async endDebate() {
                this.isRunning = false;
                updateStatus('Debate concluded!');
                document.getElementById('endDebateBtn').style.display = 'none';
                await this.generateSummary();
            }

            async generateSummary() {
                updateStatus('Generating debate summary...');
                showLoading();

                const summaryPrompt = `You are analyzing a debate between three AI agents about: "${this.topic}"

Here's the complete conversation (${this.debateHistory.length} turns):

${this.debateHistory.map((entry, i) => 
    `[Turn ${entry.turn}] ${entry.agent}:\n${entry.message}\n`
).join('\n')}

Provide a comprehensive summary that includes:
1. Main arguments from each perspective
2. Key points of agreement and disagreement
3. How the conversation evolved
4. Whether consensus was reached

Keep it concise but thorough (3-4 paragraphs).`;

                try {
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${this.apiKey}`
                        },
                        body: JSON.stringify({
                            model: this.model,
                            messages: [
                                {
                                    role: 'system',
                                    content: 'You are an expert debate analyst who provides insightful summaries of discussions.'
                                },
                                {
                                    role: 'user',
                                    content: summaryPrompt
                                }
                            ],
                            temperature: 0.7,
                            max_tokens: 800
                        })
                    });

                    if (!response.ok) {
                        throw new Error('Failed to generate summary');
                    }

                    const data = await response.json();
                    const summary = data.choices[0].message.content;

                    hideLoading();
                    displaySummary(summary);
                } catch (error) {
                    hideLoading();
                    showError(`Error generating summary: ${error.message}`);
                }
            }

            sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // UI Management
        const debateSystem = new DebateSystem();

        function updateStatus(text) {
            document.getElementById('statusText').textContent = text;
        }

        function showLoading() {
            const container = document.getElementById('messagesContainer');
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'loading';
            loadingDiv.id = 'loadingIndicator';
            loadingDiv.textContent = 'Thinking';
            container.appendChild(loadingDiv);
            container.scrollTop = container.scrollHeight;
        }

        function hideLoading() {
            const loading = document.getElementById('loadingIndicator');
            if (loading) {
                loading.remove();
            }
        }

        let currentBubble = null;
        let bubbleTimeout = null;

        function displayMessage(agentName, message, turn, agentNum) {
            // Clear any pending bubble removal
            if (bubbleTimeout) {
                clearTimeout(bubbleTimeout);
            }

            // Remove previous bubble with fade out
            if (currentBubble) {
                currentBubble.classList.add('fade-out');
                setTimeout(() => {
                    if (currentBubble && currentBubble.parentNode) {
                        currentBubble.remove();
                    }
                }, 300);
            }

            // Remove speaking class from all agents
            document.querySelectorAll('.agent-character').forEach(char => {
                char.classList.remove('speaking');
            });

            // Add speaking class to current agent
            const agentChar = document.getElementById(`agent${agentNum}Char`);
            agentChar.classList.add('speaking');

            // Create speech bubble
            const stage = document.getElementById('stageContainer');
            const bubble = document.createElement('div');
            bubble.className = `speech-bubble bubble-${agentNum}`;
            bubble.innerHTML = `
                <div class="bubble-header">${agentName} - Turn ${turn}</div>
                <div>${message.replace(/\n/g, '<br>')}</div>
            `;
            
            stage.appendChild(bubble);
            currentBubble = bubble;

            // Also add to hidden transcript
            const transcript = document.getElementById('messagesContainer');
            const transcriptEntry = document.createElement('div');
            transcriptEntry.innerHTML = `<strong>${agentName} (Turn ${turn}):</strong> ${message}<br><br>`;
            transcript.appendChild(transcriptEntry);
        }

        function showError(message) {
            const errorContainer = document.getElementById('errorContainer');
            errorContainer.innerHTML = `<div class="error-message">${message}</div>`;
            setTimeout(() => {
                errorContainer.innerHTML = '';
            }, 5000);
        }

        function displaySummary(summary) {
            const summarySection = document.getElementById('summarySection');
            const summaryContent = document.getElementById('summaryContent');
            summaryContent.innerHTML = summary.replace(/\n/g, '<br>');
            summarySection.style.display = 'block';
        }

        // Event Handlers
        document.getElementById('startDebateBtn').addEventListener('click', async () => {
            const apiKey = document.getElementById('apiKey').value.trim();
            const topic = document.getElementById('debateTopic').value.trim();
            const numRounds = parseInt(document.getElementById('numRounds').value);
            const model = document.getElementById('modelSelect').value;

            if (!apiKey) {
                showError('Please enter your OpenAI API key');
                return;
            }

            if (!topic) {
                showError('Please enter a debate topic');
                return;
            }

            const agentPersonas = [
                document.getElementById('agent1Persona').value.trim(),
                document.getElementById('agent2Persona').value.trim(),
                document.getElementById('agent3Persona').value.trim()
            ];

            if (agentPersonas.some(p => !p)) {
                showError('Please provide personas for all three agents');
                return;
            }

            // Initialize debate
            debateSystem.initialize(topic, numRounds, apiKey, model, agentPersonas);

            // Switch to debate view
            document.getElementById('setupPanel').style.display = 'none';
            document.getElementById('debateArea').classList.add('active');
            document.getElementById('messagesContainer').innerHTML = '';
            document.getElementById('summarySection').style.display = 'none';

            // Start automatic debate
            try {
                debateSystem.isRunning = true;
                document.getElementById('endDebateBtn').style.display = 'inline-block';
                await debateSystem.takeTurn();
            } catch (error) {
                console.error('Start debate error:', error);
                showError(`Failed to start debate: ${error.message}`);
            }
        });

        document.getElementById('endDebateBtn').addEventListener('click', async () => {
            debateSystem.isRunning = false;
            await debateSystem.endDebate();
        });

        document.getElementById('newDebateBtn').addEventListener('click', () => {
            debateSystem.isRunning = false;
            document.getElementById('setupPanel').style.display = 'block';
            document.getElementById('debateArea').classList.remove('active');
            document.getElementById('endDebateBtn').style.display = 'none';
            if (currentBubble) {
                currentBubble.remove();
                currentBubble = null;
            }
        });

        // Load API key from session storage if available
        const savedApiKey = sessionStorage.getItem('openai_api_key');
        if (savedApiKey) {
            document.getElementById('apiKey').value = savedApiKey;
        }

        // Save API key to session storage when entered
        document.getElementById('apiKey').addEventListener('change', (e) => {
            sessionStorage.setItem('openai_api_key', e.target.value);
        });
    </script>
</body>
</html>
